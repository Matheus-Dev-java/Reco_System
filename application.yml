server:
  port: 8080

spring:
  application:
    name: reco
  threads:
    virtual:
      enabled: true
  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5434}/${DB_NAME:reco}
    username: ${DB_USER:reco}
    password: ${DB_PASSWORD:reco}
  jpa:
    hibernate:
      ddl-auto: validate
    open-in-view: false
    properties:
      hibernate:
        jdbc:
          time_zone: UTC
        format_sql: false
  flyway:
    enabled: true
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6380}
  cache:
    type: caffeine

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  metrics:
    tags:
      application: reco

reco:
  openai:
    api-key: ${OPENAI_API_KEY:}
    base-url: https://api.openai.com/v1
    embedding-model: text-embedding-3-large
    max-chars: 4000
  qdrant:
    base-url: ${QDRANT_URL:http://localhost:6335}
    collection: reco_content
    vector-size: 3072
  cache:
    l1-ttl-seconds: 300
    l2-ttl-seconds: 86400
    l3-ttl-seconds: 3600
  recommender:
    topk: 10
    candidate-pool: 80
    max-per-category: 4
    decay-half-life-days: 21
    implicit-like-read-ratio: 0.8
  bootstrap:
    indexer-enabled: true
    initial-delay-ms: 2000
